<!DOCTYPE html>
<html lang="en">
<head>
    <title>Visualifico - MongoDB Visual Analytics Middleware</title>

    <meta charset="UTF-8">
	<link  rel="stylesheet" type="text/css" href="stylesheets/style.css">
	<link  rel="stylesheet" type="text/css" href="stylesheets/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/visualifico-chart.css"/>
	
	<script src="javascript/d3.min.js" charset="utf-8"></script>

	<script type="text/javascript" src="javascript/visualifico.js"></script>
    <style>
        
    </style>
</head>
<body>
	<div class="main-container">
		<div id="chart-measures-by-brands"></div>
		<div id="chart-brands-items-by-day"></div>
		<div id="chart-prices-by-brands"></div>
		<div id="chart-items-by-day"></div>
		
	</div>
<script>
	
	var event_dispatcher = new EventDispatcher ();
	
	var vbc = new VerticalCategoryBarChart (		
		"chart-prices-by-brands",
		//get_value
		function (d) {
		
			return d.TotalNew;
		},
		//get_key
		function (d) {
			
			return d.Brand;
		},
		event_dispatcher,
		{
			"collection": "bestSellersItems", 
			"dimension": "Brand", 
			"measure": '{"measures":["TotalNew"]}',
			"defaultFilters": {"When":{"$in":["2014-12-26","2014-12-27","2014-12-28","2014-12-29","2014-12-30"]},"Brand":{"$in":["LAMPA","Bosch","TomTom","Garmin"]}}
		},
		{ 
			"height": 350, 
			"width": 800,			
			"useCategoryColors":true,
			"showXAxisLabel":true
		}
	)
	.show ({"top": 10});	
	
	event_dispatcher.addListener (vbc)
	
	var hbc = new HorizontalCategoryBarChart (
		
		"chart-items-by-day",
		//get_value
		function (d) {
		
			return d.TotalNew;
		},
		//get_key
		function (d) {
			
			return d.When;
		},		
		event_dispatcher,
		{
			"collection": "bestSellersItems", 
			"dimension": "When", 
			"measure": '{"measures":["TotalNew"]}',
			"defaultFilters": {"When":{"$in":["2014-12-26","2014-12-27","2014-12-28","2014-12-29","2014-12-30"]},"Brand":{"$in":["LAMPA","Bosch","TomTom","Garmin"]}}
		},
		{ 	
			"height": 200, 
			"width": 800,			
			"defaultColor":"rgb(119, 147, 60)",
			"showXAxisLabel":true
			
		}
	).show ({});
	
	event_dispatcher.addListener (hbc);	
	
	var sbc = new StackedBarChart (		
		"chart-brands-items-by-day",
		//get_value
		function (d) {

			return d.TotalNew;
		},
		//get_key
		function (d) {
			
			return d.key [0];
		},
		//get_stacked_key
		function (d) {
			
			return d.key [1];
		},
		event_dispatcher,
		{
			"collection": "bestSellersItems", 
			"dimension": "When", 
			"stackedDimension": "Brand", 
			"measure": '{"measures":["TotalNew"]}',
			"defaultFilters": {"Brand":{"$in":["LAMPA","Bosch","TomTom","Garmin"]}}
		},
		{ 	
			"height": 400, 
			"width": 800,			
			"useCategoryColors":true,
			"showXAxisLabel":true
		}
	).show ({});
	
	event_dispatcher.addListener (sbc);
	
	var xbc = new xDBubbleChart (		
		"chart-measures-by-brands",
		//Get the ball attribute
		function (d) {return d.Brand},
		//Get the x axis measure
		function (d) {return d.TotalNew},
		//Get the y axis measure
		function (d) {return (d.TotalNew != 0) ? d.Price/d.TotalNew : 0;},
		//Get the ball size measure
		function (d) {return d.SalesRank;},
		event_dispatcher,
		{
			"collection": "bestSellersItems", 
			"dimension": "Brand", 
			"measure": '{"measures":["TotalNew", "SalesRank", "Price"]}',
			"defaultFilters": {"When":{"$in":["2014-12-26","2014-12-27","2014-12-28","2014-12-29","2014-12-30"]},"Brand":{"$in":["LAMPA","Bosch","TomTom","Garmin"]}}
		},
		{ 	
			"height": 500, 
			"width": 800,			
			"defaultColor":"rgb(119, 147, 60)",
			"showXAxisLabel":true
			
		}
	).show ({});
	
	event_dispatcher.addListener (xbc);
	
	
</script>
</body>
</html>
